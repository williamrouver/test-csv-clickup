<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário HubSpot</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        form {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h2 {
            margin-top: 0;
            color: #333;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: bold;
        }

        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }

        input:focus {
            outline: none;
            border-color: #4CAF50;
        }

        button {
            width: 100%;
            padding: 12px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }

        button:hover {
            background-color: #45a049;
        }

        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .message {
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
            display: none;
        }

        .error {
            background-color: #ffebee;
            color: #c62828;
            border: 1px solid #ef5350;
        }

        .success {
            background-color: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #66bb6a;
        }
    </style>
</head>
<body>
    <form id="hubspotForm">
        <h2>Formulário de Contato</h2>

        <div class="form-group">
            <label for="nome">Nome *</label>
            <input type="text" id="nome" name="nome" required>
        </div>

        <div class="form-group">
            <label for="sobrenome">Sobrenome *</label>
            <input type="text" id="sobrenome" name="sobrenome" required>
        </div>

        <div class="form-group">
            <label for="cnpj">CNPJ *</label>
            <input type="text" id="cnpj" name="cnpj" required>
        </div>

        <div class="form-group">
            <label for="razaoSocial">Razão Social *</label>
            <input type="text" id="razaoSocial" name="razaoSocial" required>
        </div>

        <div class="form-group">
            <label for="nomeFantasia">Nome Fantasia *</label>
            <input type="text" id="nomeFantasia" name="nomeFantasia" required>
        </div>

        <div class="form-group">
            <label for="email">E-mail *</label>
            <input type="email" id="email" name="email" required>
        </div>

        <div class="form-group">
            <label for="telefone">Número de Telefone *</label>
            <input type="tel" id="telefone" name="telefone" required>
        </div>

        <button type="submit" id="submitBtn">Enviar para HubSpot</button>

        <div id="errorMessage" class="message error"></div>
        <div id="successMessage" class="message success"></div>
    </form>

    <script>
      // Configurações HubSpot
      const HUBSPOT_FORM_ID = "b4bc671f-e5a5-40ee-8ee4-038fd307d7bb";
      const HUBSPOT_PORTAL_ID = "49700629";

      // Elementos do DOM
      const form = document.getElementById("hubspotForm");
      const errorMessage = document.getElementById("errorMessage");
      const successMessage = document.getElementById("successMessage");
      const submitBtn = document.getElementById("submitBtn");

      // Envio do formulário para HubSpot
      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        errorMessage.style.display = "none";
        successMessage.style.display = "none";
        submitBtn.disabled = true;
        submitBtn.textContent = "Enviando...";

        // Coletar dados do formulário
        const formData = {
          fields: [
            {
              name: "firstname",
              value: document.getElementById("nome").value
            },
            {
              name: "lastname",
              value: document.getElementById("sobrenome").value
            },
            {
              name: "cnpj_novo_",
              value: document.getElementById("cnpj").value
            },
            {
              name: "razao_social",
              value: document.getElementById("razaoSocial").value,
            },
            {
              name: "nome_fantasia",
              value: document.getElementById("nomeFantasia").value,
            },
            {
              name: "email",
              value: document.getElementById("email").value
            },
            {
              name: "phone",
              value: document.getElementById("telefone").value
            },
          ],
          skipValidation: false,
          context: {
            pageUri: window.location.href,
            pageName: document.title
          },
        };

        try {
          const response = await fetch(
            `https://api.hsforms.com/submissions/v3/integration/submit/${HUBSPOT_PORTAL_ID}/${HUBSPOT_FORM_ID}`,
            {
              method: "POST",
              headers: {
                Accept: "application/json",
                "Content-Type": "application/json",
              },
              body: JSON.stringify(formData),
            }
          );

          if (!response.ok) {
            const errorData = await response.json();
            console.error("Erro do HubSpot:", errorData);
            throw new Error(`Erro HTTP: ${response.status} - ${errorData.message || 'Erro desconhecido'}`);
          }

          const result = await response.json();
          console.log("✅ Formulário enviado com sucesso:", result);

          successMessage.textContent =
            "✅ Dados enviados com sucesso para o HubSpot!";
          successMessage.style.display = "block";

          // Resetar formulário após 3 segundos
          setTimeout(() => {
            form.reset();
            successMessage.style.display = "none";
          }, 3000);
        } catch (error) {
          console.error("❌ Erro ao enviar para HubSpot:", error);
          errorMessage.textContent =
            "❌ Erro ao enviar dados: " + error.message;
          errorMessage.style.display = "block";
        } finally {
          submitBtn.disabled = false;
          submitBtn.textContent = "Enviar para HubSpot";
        }
      });

      console.log("✅ Formulário HubSpot carregado");
    </script>
</body>
</html>
